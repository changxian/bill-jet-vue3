appId: 'com.jeecg.boot3'
# 产品名称
productName: 'jeecgboot'# 明确指定主入口文件路径（与 package.json 的 main 字段一致）
main: 'dist/electron/main.js'
files:
  # 仅包含 dist 目录下所有文件
  - 'dist/**/*'
  # 强制包含主进程文件（关键：确保 main.js 被打包）
#  - 'dist/electron/main.js'
#  - 'dist/electron/preload/**/*'  # 包含预加载脚本
#  - 'data/**/*'
#  - 'app.jar'  # 强制指定主进程文件（使用绝对路径模式，避免层级问题）
  - from: dist/electron/main.js
    to: dist/electron/main.js
  - from: dist/electron/preload
    to: dist/electron/preload
  - from: data
    to: data
  - from: app.jar
    to: app.jar
  # 特别排除 node_modules 目录
  # - '!node_modules'
# 确保不排除必要文件
exclude:
  - node_modules/**/*
directories:
  # 输出目录
  output: 'dist-electron'
win:
  # win exe 程序图标
  icon: 'electron/icons/app.ico'
  artifactName: 'jeecgboot-setup-${version}.exe'
# 安装包配置
nsis:
  oneClick: false
  # 是否允许用户选择安装目录
  allowToChangeInstallationDirectory: true
  # 是否创建桌面快捷方式
  createDesktopShortcut: true
  # 安装程序的图标
  installerIcon: 'electron/icons/installer.ico'
  # 可选：添加安装完成页的Java环境提示
  include: 'electron/installer.nsh'
